<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/custom.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Angular Activity Monitor by sean3z</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Activity Monitor</h1>
          <h2>An Angular service that tracks users&#39; DOM activity</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/sean3z/angular-activity-monitor/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/sean3z/angular-activity-monitor/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/sean3z/angular-activity-monitor" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <article class="markdown-body entry-content" itemprop="mainContentOfPage">
<p>This is a simple service that will emit a couple of events based on the users' DOM activity. It also allows you to "keep items alive" in the background so long as the user is considered "active".</p>

<div><p align="center"><a href="demo.html" class="button" style="float: none;"><span style="padding-left: 0;">View Demo</span></a></p></div>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation:</h2>

<div class="highlight highlight-source-shell"><pre>$ bower install angular-activity-monitor</pre></div>

<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage:</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">angular</span>.<span class="pl-en">module</span>(<span class="pl-s"><span class="pl-pds">'</span>myModule<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>ActivityMonitor<span class="pl-pds">'</span></span>]);
<span class="pl-smi">MyController</span>.<span class="pl-smi">$inject</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>ActivityMonitor<span class="pl-pds">'</span></span>];

<span class="pl-k">function</span> <span class="pl-en">MyController</span>(<span class="pl-smi">ActivityMonitor</span>) {
  <span class="pl-smi">ActivityMonitor</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>inactive<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>() {
    <span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>y0, you're inactive!<span class="pl-pds">"</span></span>);
  });
}</pre></div>

<h5><a id="user-content-activitymonitoroptions-configuration" class="anchor" href="#activitymonitoroptions-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>ActivityMonitor.options</code> (configuration):</h5>

<ul>
<li><code>enabled</code>: whether to regularly check for inactivity (default: <code>false</code>) [bool]</li>
<li><code>keepAlive</code>: background execution frequency (default: <code>800</code>) [seconds]</li>
<li><code>inactive</code>: how long until user is considered inactive (default: <code>900</code>) [seconds]</li>
<li><code>warning</code>: when user is nearing inactive state (deducted from inactive) (default: <code>60</code>) [seconds]</li>
</ul>

<h5><a id="user-content-activitymonitoruser-information-about-the-user" class="anchor" href="#activitymonitoruser-information-about-the-user" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>ActivityMonitor.user</code> (information about the user):</h5>

<ul>
<li><code>action</code>: timestamp of the users' last action (default: <code>Date.now()</code>) [milliseconds]</li>
<li><code>active</code>: is the user considered active? (default: <code>true</code>) [bool]</li>
<li><code>warning</code>: is the user nearing inactivity? (default: <code>false</code>) [bool]</li>
</ul>

<h5><a id="user-content-activitymonitor-methods" class="anchor" href="#activitymonitor-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>ActivityMonitor</code> Methods:</h5>

<ul>
<li><code>on(event, callback)</code> (alias <code>bind</code>): subsribe to a particular event</li>
<li><code>off(event[, callback])</code> (alias <code>unbind</code>): unsubscribe to a particular event. If no <code>callback</code> or <code>namespace</code> provided, all subscribers for the given <code>event</code> will be cleared.</li>
<li><code>activity()</code>: manually invoke user activity (this updates the <code>User</code> object above)</li>
</ul>

<h5><a id="user-content-activitymonitor-events" class="anchor" href="#activitymonitor-events" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>ActivityMonitor</code> Events:</h5>

<ul>
<li><code>keepAlive</code>: anything to execute (at the <code>Options.keepAlive</code> interval) so long as the user is active.</li>
<li><code>warning</code>: when user is approaching inactive state</li>
<li><code>inactive</code>: when user is officially considered inactive</li>
</ul>

<h2><a id="user-content-how-long-until-user-is-inactive" class="anchor" href="#how-long-until-user-is-inactive" aria-hidden="true"><span class="octicon octicon-link"></span></a>How long until user is inactive?</h2>

<p>This can be configured by setting the <code>ActivityMonitor.options.inactive</code> property to the desired timeout (in seconds).</p>

<h2><a id="user-content-when-is-the-user-considered-active" class="anchor" href="#when-is-the-user-considered-active" aria-hidden="true"><span class="octicon octicon-link"></span></a>When is the user considered active?</h2>

<p>Everytime one of the follow DOM events occur, the <code>action</code> and <code>active</code> properties on the <code>User</code> object is updated accordingly. Someone should probably make this customizable as this is not exposed currently.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> DOMevents <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>mousemove<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>mousedown<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>keypress<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>wheel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>touchstart<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>scroll<span class="pl-pds">'</span></span>];</pre></div>

<h2><a id="user-content-unsubscribing-and-event-namespacing" class="anchor" href="#unsubscribing-and-event-namespacing" aria-hidden="true"><span class="octicon octicon-link"></span></a>(Un)subscribing and Event namespacing</h2>

<p>If you've ever used <a href="http://api.jquery.com/unbind/"><code>jQuery.unbind()</code></a>, you're in luck. This subscription model works <em>almost</em> exactly like that. Subscribing is pretty straight forward using <code>.on()</code> or <code>.bind()</code> as described above but, unsubscribing gets a little weird. You essentially have two options:</p>

<ul>
<li>Pass the same callback argument to <code>.unbind()</code> or <code>.off()</code></li>
<li>Subscribe and unsubscribe using event namespacing.</li>
</ul>

<p><em>same callback example</em></p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> <span class="pl-en">foo</span> <span class="pl-k">=</span> <span class="pl-k">function</span>() {
  <span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>y0, you're inactive!<span class="pl-pds">"</span></span>);
};
<span class="pl-smi">ActivityMonitor</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>inactive<span class="pl-pds">'</span></span>, foo); <span class="pl-c">/* subscribe */</span>
<span class="pl-smi">ActivityMonitor</span>.<span class="pl-en">off</span>(<span class="pl-s"><span class="pl-pds">'</span>inactive<span class="pl-pds">'</span></span>, foo); <span class="pl-c">/* unsubscribe */</span></pre></div>

<p><em>event namespace example</em></p>

<p>Instead of maintaining references to callbacks in order to unbind them, we can namespace the events and use this capability to easily unbind our actions. Namespaces are defined by using a period (<code>.</code>) character when binding to an event:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">ActivityMonitor</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>inactive.myEvent<span class="pl-pds">'</span></span>, <span class="pl-k">function</span> <span class="pl-en">foo</span>() {
  <span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>y0, you're inactive!<span class="pl-pds">"</span></span>);
});
<span class="pl-smi">ActivityMonitor</span>.<span class="pl-en">off</span>(<span class="pl-s"><span class="pl-pds">'</span>inactive.myEvent<span class="pl-pds">'</span></span>);</pre></div>

<p>If there's something missing or some quirk you've found. <em>FIX OR UPDATE ME!!!</em></p>
</article>
        </section>

        <footer>
          Angular-activity-monitor is maintained by <a href="https://github.com/sean3z">sean3z</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
