(function(){angular.module("ActivityMonitor",[]).service("ActivityMonitor",function(m){var g,h;function t(){m.on(n,k);a.options.enabled=!0;a.user.warning=!1;g=setInterval(function(){e(l)},a.options.keepAlive*f);h=setInterval(function(){var b=Date.now(),c=b-(a.options.inactive-a.options.warning)*f,b=b-a.options.inactive*f;!a.user.warning&&a.user.action<=c&&(a.user.warning=!0,e(p));a.user.active&&a.user.action<=b&&(a.user.active=!1,e(q),a.options.enabled=!1,clearInterval(h),clearInterval(g),m.off(n,
k))},a.options.monitor*f)}function k(){a.user.active=!0;a.user.action=Date.now();a.user.warning&&(a.user.warning=!1,e(l))}function e(b){if(a.options.enabled){var c=Object.keys(d[b]);b&&c.length&&c.forEach(function(a){d[b][a]&&d[b][a]()})}}function r(a,c){a=a.split(".");a[1]||"function"!==typeof c||(a[1]=c.toString().substr(0,150).replace(/\r?\n|\r|\s+/gm,""));return{name:a[0],space:a[1]}}var a=this;a.options={enabled:!1,keepAlive:800,inactive:900,warning:60,monitor:3};a.user={action:Date.now(),active:!0,
warning:!1};a.activity=k;a.on=a.bind=function(b,c){b&&"function"===typeof c&&(b=r(b,c),d[b.name][b.space]=c,!a.options.enabled&&t())};a.off=a.unbind=function(a,c){a=r(a,c);a.space?d[a.name][a.space]=null:d[a.name]={}};var d={};d[l]={};d[q]={};d[p]={};g=h=null;var n="mousemove mousedown keypress wheel touchstart scroll";return a});var f=1E3,l="keepAlive",q="inactive",p="warning"})();